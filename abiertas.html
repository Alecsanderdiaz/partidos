<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Apuestas Abiertas</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>
<body>
    <div id="container" class="container pt-4">

    </div>
    <div id="container-todos" class="container pb-4">

    </div>
    
    <script src="apuestas-abiertas.js"></script>
    <script>

        function hacerFilaPartido(partido) {
            partido[0] = partido[0] - 10000
            return `
                <div class="row">
                    <div class="col-2"><div class="overflow-x-hidden"><small>${ partido[0] }</small></div></div>
                    <div class="col-3"><div class="overflow-x-hidden"><small>${ partido[1] }</small></div></div>
                    <div class="col-3"><div class="overflow-x-hidden"><small>${ partido[2] }</small></div></div>
                    <div class="col-2"><div class="overflow-x-hidden"><small>${ partido[3].substring(0,3).toUpperCase() }</small></div></div>
                    <div class="col-2"><div class="overflow-x-hidden">${ partido[4].toFixed(2) }</div></div>
                </div>

            `
        }
        let html = ''
        let html_todos = ''
        let partidos_todos = []
        APUESTAS_ABIERTAS.forEach(grupo => {
            grupo = grupo.sort((a,b) => a[0] - b[0])
            grupo.forEach((partido, index) => {

                

                html += index === 0 ? '<div class="row text-end"><b>$ '+ partido +'</b></div>' : hacerFilaPartido(partido)
                
                let partido_encontrado = partidos_todos.find(p => p[1] === partido[1])
                if (!partido_encontrado && Array.isArray(partido)) {
                    partidos_todos.push(partido)

                }
            })    
            html += '<hr>'        


        });

        partidos_todos = partidos_todos.sort((a,b) => a[0] - b[0])

        partidos_todos.forEach(partido => {
            html_todos += `
                    <div class="row">
                        <div class="col-2"><div class="overflow-x-hidden"><small>${ partido[0] }</small></div></div>
                        <div class="col-3"><div class="overflow-x-hidden"><small>${ partido[1] }</small></div></div>
                        <div class="col-3"><div class="overflow-x-hidden"><small>${ partido[2] }</small></div></div>
                    </div>
                `
        });

        document.querySelector('#container').innerHTML = html
        document.querySelector('#container-todos').innerHTML = html_todos

        
    </script>
</body>
</html>