let PARTIDOS_WPLAY = [{"hora":10635,"liga":"S-CHIF","local":"Nantong Zhiyun","visitante":"Qingdao Hainiu","cuotaLocal":2.25,"empate":3.3,"cuotaVisitante":2.8,"cantidadDeApuestas":42,"cuotaCualquiera":1.4,"cuotaFavorito":1,"rate":1,"stake":0},{"hora":11100,"liga":"U-CONF","local":"Bodo Glimt","visitante":"Sepsi OSK","cuotaLocal":1.222,"empate":6.25,"cuotaVisitante":11,"cantidadDeApuestas":99,"cuotaCualquiera":1.2,"cuotaFavorito":1,"rate":1,"stake":2,"favorito":"visitante"},{"hora":11100,"liga":"U-CONF","local":"HJK Helsinki","visitante":"Farul Constanta","cuotaLocal":2.15,"empate":3.5,"cuotaVisitante":3.1,"cantidadDeApuestas":100,"cuotaCualquiera":1.4,"cuotaFavorito":1,"rate":1,"stake":3,"favorito":"visitante"},{"hora":11145,"liga":"U-CONF","local":"Breidablik","visitante":"FC Struga Trim Lum","cuotaLocal":1.95,"empate":3.5,"cuotaVisitante":3.65,"cantidadDeApuestas":100,"cuotaCualquiera":1.363,"cuotaFavorito":1,"rate":1,"stake":2,"favorito":"visitante"},{"hora":11200,"liga":"U-CONF","local":"Twente","visitante":"Fenerbahce","cuotaLocal":2.25,"empate":3.7,"cuotaVisitante":2.95,"cantidadDeApuestas":178,"cuotaCualquiera":1.285,"cuotaFavorito":1,"rate":1,"stake":4,"favorito":"visitante"},{"hora":11200,"liga":"U-CONF","local":"Apoel Nicosia","visitante":"KAA Gent","cuotaLocal":2.9,"empate":3.35,"cuotaVisitante":2.35,"cantidadDeApuestas":112,"cuotaCualquiera":1.363,"cuotaFavorito":1,"rate":1,"stake":3,"favorito":"visitante"},{"hora":11200,"liga":"U-CONF","local":"Viktoria Plzen","visitante":"Tobol Kostanay","cuotaLocal":1.222,"empate":6,"cuotaVisitante":11,"cantidadDeApuestas":100,"cuotaCualquiera":1.222,"cuotaFavorito":1,"rate":1,"stake":4,"favorito":"local"},{"hora":11200,"liga":"U-CONF","local":"Brann Bergen","visitante":"AZ Alkmaar","cuotaLocal":2.85,"empate":3.65,"cuotaVisitante":2.25,"cantidadDeApuestas":118,"cuotaCualquiera":1.3,"cuotaFavorito":1,"rate":1,"stake":3,"favorito":"visitante"},{"hora":11230,"liga":"U-CONF","local":"PAOK Thessaloniki","visitante":"Hearts","cuotaLocal":1.42,"empate":4.5,"cuotaVisitante":7,"cantidadDeApuestas":115,"cuotaCualquiera":1.3,"cuotaFavorito":1,"rate":1,"stake":3,"favorito":"local"},{"hora":11300,"liga":"U-CONF","local":"Fiorentina","visitante":"Rapid Vienna","cuotaLocal":1.133,"empate":7.5,"cuotaVisitante":19,"cantidadDeApuestas":113,"cuotaCualquiera":1.222,"cuotaFavorito":1,"rate":1,"stake":4,"favorito":"local"},{"hora":11300,"liga":"U-CONF","local":"SC Dnipro-1","visitante":"Spartak Trnava FC","cuotaLocal":2.7,"empate":3.3,"cuotaVisitante":2.55,"cantidadDeApuestas":99,"cuotaCualquiera":1.42,"cuotaFavorito":1,"rate":1,"stake":3,"favorito":"visitante"},{"hora":11300,"liga":"U-CONF","local":"Ferencvarosi TC","visitante":"VMFD Zalgiris","cuotaLocal":1.285,"empate":5.5,"cuotaVisitante":9,"cantidadDeApuestas":97,"cuotaCualquiera":1.222,"cuotaFavorito":1,"rate":1,"stake":4,"favorito":"local"},{"hora":11300,"liga":"U-CONF","local":"FK Partizani Tirana","visitante":"FC Astana","cuotaLocal":3.2,"empate":3.35,"cuotaVisitante":2.2,"cantidadDeApuestas":98,"cuotaCualquiera":1.4,"cuotaFavorito":1,"rate":1,"stake":2,"favorito":"local"},{"hora":11300,"liga":"U-CONF","local":"NK Celje","visitante":"Maccabi Tel Aviv","cuotaLocal":3.45,"empate":3.55,"cuotaVisitante":2,"cantidadDeApuestas":100,"cuotaCualquiera":1.333,"cuotaFavorito":1,"rate":1,"stake":3,"favorito":"visitante"},{"hora":11300,"liga":"U-CONF","local":"Adana Demirspor","visitante":"Genk","cuotaLocal":2.3,"empate":3.7,"cuotaVisitante":2.75,"cantidadDeApuestas":114,"cuotaCualquiera":1.285,"cuotaFavorito":1,"rate":1,"stake":3,"favorito":"visitante"},{"hora":11300,"liga":"U-CONF","local":"Besiktas","visitante":"Dynamo Kiev","cuotaLocal":1.45,"empate":4.5,"cuotaVisitante":6.25,"cantidadDeApuestas":113,"cuotaCualquiera":1.285,"cuotaFavorito":1,"rate":1,"stake":5,"favorito":"local"},{"hora":11300,"liga":"U-CONF","local":"Bate Borisov","visitante":"KF Ballkani","cuotaLocal":2.9,"empate":3.55,"cuotaVisitante":2.25,"cantidadDeApuestas":99,"cuotaCualquiera":1.3,"cuotaFavorito":1,"rate":1,"stake":4,"favorito":"local"},{"hora":11315,"liga":"U-CONF","local":"HNK Rijeka","visitante":"Lille","cuotaLocal":4.2,"empate":3.65,"cuotaVisitante":1.8,"cantidadDeApuestas":115,"cuotaCualquiera":1.35,"cuotaFavorito":1,"rate":1,"stake":5,"favorito":"visitante"},{"hora":11330,"liga":"U-CONF","local":"Club Brugge","visitante":"Osasuna","cuotaLocal":2.05,"empate":3.45,"cuotaVisitante":3.45,"cantidadDeApuestas":114,"cuotaCualquiera":1.38,"cuotaFavorito":1,"rate":1,"stake":5,"favorito":"visitante"},{"hora":11330,"liga":"U-CONF","local":"Eintracht Frankfurt","visitante":"Levski Sofia","cuotaLocal":1.2,"empate":6.25,"cuotaVisitante":13,"cantidadDeApuestas":112,"cuotaCualquiera":1.285,"cuotaFavorito":1,"rate":1,"stake":5,"favorito":"local"},{"hora":11400,"liga":"U-CONF","local":"Partizan Belgrade","visitante":"Nordsjaelland","cuotaLocal":3.1,"empate":3.45,"cuotaVisitante":2.2,"cantidadDeApuestas":96,"cuotaCualquiera":1.35,"cuotaFavorito":1,"rate":1,"stake":2,"favorito":"visitante"},{"hora":11400,"liga":"U-CONF","local":"Aston Villa","visitante":"Hibernian","cuotaLocal":1.125,"empate":9,"cuotaVisitante":15,"cantidadDeApuestas":110,"cuotaCualquiera":1.222,"cuotaFavorito":1,"rate":1,"stake":5,"favorito":"local"},{"hora":11400,"liga":"U-CONF","local":"Legia Warsaw","visitante":"Midtjylland","cuotaLocal":1.833,"empate":3.7,"cuotaVisitante":3.9,"cantidadDeApuestas":101,"cuotaCualquiera":1.333,"cuotaFavorito":1,"rate":1,"stake":3,"favorito":"local"},{"hora":11100,"liga":"U-EURO","local":"Qarabag FK","visitante":"NK Olimpija Ljubljana","cuotaLocal":1.7,"empate":3.8,"cuotaVisitante":5,"cantidadDeApuestas":171,"cuotaCualquiera":1.35,"cuotaFavorito":1,"rate":1,"stake":3,"favorito":"local"},{"hora":11200,"liga":"U-EURO","local":"Zorya Lugansk","visitante":"Slavia Prague","cuotaLocal":7.5,"empate":4.5,"cuotaVisitante":1.42,"cantidadDeApuestas":170,"cuotaCualquiera":1.3,"cuotaFavorito":1,"rate":1,"stake":3,"favorito":"visitante"},{"hora":11200,"liga":"U-EURO","local":"AC Sparta Praha","visitante":"NK Dinamo Zagreb","cuotaLocal":1.909,"empate":3.65,"cuotaVisitante":3.8,"cantidadDeApuestas":158,"cuotaCualquiera":1.38,"cuotaFavorito":1,"rate":1,"stake":3,"favorito":"visitante"},{"hora":11200,"liga":"U-EURO","local":"Aris Limassol","visitante":"Slovan Bratislava","cuotaLocal":1.8,"empate":3.6,"cuotaVisitante":4.2,"cantidadDeApuestas":100,"cuotaCualquiera":1.4,"cuotaFavorito":1,"rate":1,"stake":3,"favorito":"visitante"},{"hora":11200,"liga":"U-EURO","local":"FC Sheriff Tiraspol","visitante":"Ki Klaksvik","cuotaLocal":1.45,"empate":4.2,"cuotaVisitante":7,"cantidadDeApuestas":98,"cuotaCualquiera":1.38,"cuotaFavorito":1,"rate":1,"stake":3,"favorito":"local"},{"hora":11300,"liga":"U-EURO","local":"Ajax Amsterdam","visitante":"Ludogorets","cuotaLocal":1.285,"empate":6,"cuotaVisitante":9,"cantidadDeApuestas":176,"cuotaCualquiera":1.181,"cuotaFavorito":1,"rate":1,"stake":5,"favorito":"local"},{"hora":11300,"liga":"U-EURO","local":"Cukaricki","visitante":"Olympiacos","cuotaLocal":5.25,"empate":4.2,"cuotaVisitante":1.571,"cantidadDeApuestas":189,"cuotaCualquiera":1.333,"cuotaFavorito":1,"rate":1,"stake":3,"favorito":"visitante"},{"hora":11330,"liga":"U-EURO","local":"FC Lugano","visitante":"St. Gilloise","cuotaLocal":2.8,"empate":3.45,"cuotaVisitante":2.45,"cantidadDeApuestas":193,"cuotaCualquiera":1.363,"cuotaFavorito":1,"rate":1,"stake":4,"favorito":"visitante"},{"hora":11345,"liga":"U-EURO","local":"Aberdeen","visitante":"BK Hacken","cuotaLocal":2.8,"empate":3.5,"cuotaVisitante":2.35,"cantidadDeApuestas":114,"cuotaCualquiera":1.333,"cuotaFavorito":1,"rate":1,"stake":3,"favorito":"local"},{"hora":11400,"liga":"U-EURO","local":"HSK Zrinjski Mostar","visitante":"LASK Linz","cuotaLocal":2.9,"empate":3.35,"cuotaVisitante":2.4,"cantidadDeApuestas":192,"cuotaCualquiera":1.4,"cuotaFavorito":1,"rate":1,"stake":2,"favorito":"visitante"},{"hora":11930,"liga":"ZA-BRA2","local":"Juventude RS","visitante":"Chapecoense SC","cuotaLocal":1.833,"empate":3.2,"cuotaVisitante":4.75,"cantidadDeApuestas":85,"cuotaCualquiera":1.55,"cuotaFavorito":1,"rate":1,"stake":2,"favorito":"visitante"},{"hora":11900,"liga":"ZA-CHI1","local":"Union Espanola","visitante":"Universidad Catolica","cuotaLocal":2.15,"empate":3.35,"cuotaVisitante":3.1,"cantidadDeApuestas":82,"cuotaCualquiera":1.363,"cuotaFavorito":1,"rate":1,"stake":3,"favorito":"visitante"},{"hora":11500,"liga":"ZA-ECU2","local":"Independiente Juniors","visitante":"Chacaritas SC","cuotaLocal":1.75,"empate":3.3,"cuotaVisitante":4.5,"cantidadDeApuestas":42,"cuotaCualquiera":1.5,"cuotaFavorito":1,"rate":1,"stake":0},{"hora":11900,"liga":"ZA-ECU2","local":"Imbabura SC","visitante":"Cuniburo FC","cuotaLocal":1.909,"empate":3.25,"cuotaVisitante":3.75,"cantidadDeApuestas":42,"cuotaCualquiera":1.45,"cuotaFavorito":1,"rate":1,"stake":0},{"hora":11930,"liga":"ZA-LIBE","local":"Olimpia Asuncion","visitante":"Fluminense RJ","cuotaLocal":2.8,"empate":3.35,"cuotaVisitante":2.6,"cantidadDeApuestas":177,"cuotaCualquiera":1.4,"cuotaFavorito":1,"rate":1,"stake":3,"favorito":"visitante"},{"hora":12205,"liga":"ZA-MEX2","local":"Atlante","visitante":"Dorados","cuotaLocal":1.222,"empate":6,"cuotaVisitante":12,"cantidadDeApuestas":89,"cuotaCualquiera":1.3,"cuotaFavorito":1,"rate":1,"stake":3,"favorito":"local"},{"hora":11700,"liga":"ZA-SUDA","local":"Fortaleza CE","visitante":"America Mineiro MG","cuotaLocal":1.65,"empate":3.95,"cuotaVisitante":5.5,"cantidadDeApuestas":190,"cuotaCualquiera":1.42,"cuotaFavorito":1,"rate":1,"stake":3,"favorito":"local"},{"hora":11700,"liga":"ZA-SUDA","local":"Sao Paulo SP","visitante":"LDU Quito","cuotaLocal":1.45,"empate":4.5,"cuotaVisitante":7.5,"cantidadDeApuestas":190,"cuotaCualquiera":1.38,"cuotaFavorito":1,"rate":1,"stake":3,"favorito":"local"}]

let PARTIDOS_CON_CUOTA = [
    [11100, 'Qarabag FK', 'NK Olimpija Ljubljana', 'Qarabag FK', 1.70],
[11200, 'Zorya Lugansk', 'Slavia Prague', 'Slavia Prague', 1.533],
[11200, 'AC Sparta Praha', 'NK Dinamo Zagreb', 'NK Dinamo Zagreb', 2.45],
[11200, 'Aris Limassol', 'Slovan Bratislava', 'Slovan Bratislava', 2.45],
[11300, 'Cukaricki', 'Olympiacos', 'Olympiacos', 1.615],
[11330, 'FC Lugano', 'St. Gilloise', 'St. Gilloise', 1.95],
[11400, 'HSK Zrinjski Mostar', 'LASK Linz', 'LASK Linz', 2.00],
[11930, 'Juventude RS', 'Chapecoense SC', 'Chapecoense SC', 2.95],
[11900, 'Union Espanola', 'Universidad Catolica', 'Universidad Catolica', 2.20],
[11930, 'Olimpia Asuncion', 'Fluminense RJ', 'Fluminense RJ', 2.10],
[12205, 'Atlante', 'Dorados', 'Atlante', 1.38],
[11700, 'Fortaleza CE', 'America Mineiro MG', 'Fortaleza CE', 1.75],
[11700, 'Sao Paulo SP', 'LDU Quito', 'Sao Paulo SP', 1.615],
[11400, 'Legia Warsaw', 'Midtjylland', 'Legia Warsaw', 1.65],
[11400, 'Aston Villa', 'Hibernian', 'Aston Villa', 1.25],
[11330, 'Eintracht Frankfurt', 'Levski Sofia', 'Eintracht Frankfurt', 1.363],
[11300, 'Bate Borisov', 'KF Ballkani', 'Bate Borisov', 1.909],
[11300, 'Besiktas', 'Dynamo Kiev', 'Besiktas', 1.48],
[11300, 'FK Partizani Tirana', 'FC Astana', 'FK Partizani Tirana', 2.15],
[11300, 'Ferencvarosi TC', 'VMFD Zalgiris', 'Ferencvarosi TC', 1.35],
[11300, 'Fiorentina', 'Rapid Vienna', 'Fiorentina', 1.285],
[11230, 'PAOK Thessaloniki', 'Hearts', 'PAOK Thessaloniki', 1.48],
[11200, 'Viktoria Plzen', 'Tobol Kostanay', 'Viktoria Plzen', 1.333],
[11400, 'Partizan Belgrade', 'Nordsjaelland', 'Nordsjaelland', 1.80],
[11330, 'Club Brugge', 'Osasuna', 'Osasuna', 2.20],
[11315, 'HNK Rijeka', 'Lille', 'Lille', 1.65],
[11300, 'Adana Demirspor', 'Genk', 'Genk', 1.833],
[11300, 'NK Celje', 'Maccabi Tel Aviv', 'Maccabi Tel Aviv', 1.666],
[11300, 'SC Dnipro-1', 'Spartak Trnava FC', 'Spartak Trnava FC', 2.00],
[11200, 'Brann Bergen', 'AZ Alkmaar', 'AZ Alkmaar', 1.769],
[11200, 'Apoel Nicosia', 'KAA Gent', 'KAA Gent', 1.85],
[11200, 'Twente', 'Fenerbahce', 'Fenerbahce', 1.95],
[11145, 'Breidablik', 'FC Struga Trim Lum', 'FC Struga Trim Lum', 2.25],
[11100, 'HJK Helsinki', 'Farul Constanta', 'Farul Constanta', 2.15],
[11100, 'Bodo Glimt', 'Sepsi OSK', 'Sepsi OSK', 2.75],
[11345, 'Aberdeen', 'BK Hacken', 'Aberdeen', 1.909],
[11300, 'Ajax Amsterdam', 'Ludogorets', 'Ajax Amsterdam', 1.35],
[11200, 'FC Sheriff Tiraspol', 'Ki Klaksvik', 'FC Sheriff Tiraspol', 1.571],
]


let retorno = [

]

let index = 0

for (const partido of PARTIDOS_WPLAY) {
    let local = partido['local']

    let partido_encontrado = PARTIDOS_CON_CUOTA.find(p => p[1] === local)

    console.log({ local, partido_encontrado })

    let partido_retorno = undefined
    if (partido_encontrado) {
        if (typeof partido_encontrado[3] === 'number') {
            const cuotaFavorito = partido['cuotaCualquiera']
            partido_retorno = {
                ...partido,
                favorito: undefined,
                cuotaFavorito,
                rate: 1,
                stake: 0
            }
        } else {
            const favorito = partido_encontrado[1] === partido_encontrado[3] ? 'local' : 'visitante'
            const cuotaFavorito = partido_encontrado[4]
            partido_retorno = {
                ...partido,
                favorito,
                cuotaFavorito,
                rate: (cuotaFavorito / partido.cuotaCualquiera).toFixed(2)
            }
        }
    } else {
        partido_retorno = {
            ...partido,
            favorito: undefined,
            cuotaFavorito: 1,
            rate: 1,
            stake: 0
        }
    }
    retorno.push(partido_retorno)
}


console.log({
    PARTIDOS_WPLAY: PARTIDOS_WPLAY.length,
    PARTIDOS_CON_CUOTA: PARTIDOS_CON_CUOTA.length
})

const fs = require('fs')

let retornoString = `let PARTIDOS_OPTIMIZADOS = ${JSON.stringify(retorno)}`

fs.writeFileSync('partidos_optimizados_favoritos.txt', retornoString)

console.log('VER -> partidos_optimizados_favoritos.txt')